{% extends 'base.html.twig' %}

{% block title %}Hello CartController!{% endblock %}

{% block body %}
<style>
    .example-wrapper { margin: 1em auto; max-width: 800px; width: 95%; font: 18px/1.5 sans-serif; }
    .example-wrapper code { background: #F5F5F5; padding: 2px 6px; }
</style>

<H1>Votre panier</H1>
<table>
    <thead>
        <tr>Produit</tr>
        <tr>Image</tr>
        <tr>Prix</tr>
        <tr>Quantité</tr>
        <tr>Total</tr>
        <tr>Actions</tr>
    </thead>
    <tbody>
        {% for element in dataPanier %}
                <tr>
                    <td>{{ element.produit.des }}</td>
                    
                    <td class="text-end">{{ element.produit.price }} €</td>
                    <td>{{ element.quantite }}</td>
                    <td class="text-end">{{ element.quantite * element.produit.price }} €</td>
                    <td>
                        <a href="{{path("cart_add", {id: element.produit.id})}}">Plus 1</i>
                        </a>
                        <a href="{{path("cart_remove", {id: element.produit.id})}}" > Moins 1
                        </a>
                        <a href="{{path("cart_delete", {id: element.produit.id})}}" > Supprimer
                            
                        </a>
                    </td>
                </tr>
            {% else %}
                <tr>
                    <td colspan="5" class="text-center">Votre panier est vide</td>
                </tr>
            {% endfor %}
    </tbody>
    <tfoot>
            <tr>
                <td colspan="3">Total</td>
                <td class="text-end">{{ total }} €</td>
                <td>
                    <a href="{{path("cart_delete_all")}}" > Supprimer tout le panier
                        
                </td>
                <td>Passer la commande</td>
                
            </tr>
            
            
        </tfoot>
        
</table>
<form action="" method="POST">
                    <script
                        src="https://checkout.stripe.com/checkout.js" class="stripe-button"
                        data-label="Payer avec votre carte"
                        data-currency="eur"
                        data-key="pk_test_51KabbgBf0vZfGc8ScJVN6IvZKFqqjitig8gziF6j3DPveOEI5tKbeI1QyTxqdWZ4s66NLeVNrWWbyVJL2zFUm2fR007NfrHBLf"
                        data-amount="{{ total * 100 }}"
                        data-name="Eco Service"
                        data-description="Payer votre commande"
                        redirect.failure-reason="product/index.html.twig"
                        data-shippingAddress='true'
                        data-zip-code="true"
                        
                        data-locale="auto">
                        
                        
                        
                    </script>
        </form>
{% endblock %}
